## 背景
- 智能路由默认关闭，数据库守卫与步骤播报逻辑未生效。
- 无数据库时仍尝试连接导致错误，前端缺少警告提示。
- 步骤播报语句格式不规范，触发语法错误。
- 设置页新增开关布局与样式不协调。

## 目标
1. 启用或统一走智能路由流程，确保守卫逻辑生效。
2. 强化数据库拦截反馈与步骤播报格式约束。
3. 调整前端提示卡片与设置界面，改善视觉体验。
4. 验证不同数据库场景的行为与提示。

## 计划
1. **对齐现状**：检查 `config/config.json` 与 `backend/api/chat_api.py`，确认路由调用条件。
2. **后端调整**：
   - 更新默认配置启用智能路由或入口统一调用。
   - 扩展 `SmartRouter.route()` 的数据库守卫返回信息，提供提示时长标记。
   - 改进步骤播报提示文本，示例安全格式。
3. **前端调优**：
   - `frontend/static/js/app.js`：渲染轻量数据库警告卡片，接入结构化步骤数据。
   - `frontend/static/css/style.css`：优化警告卡样式与按钮权重。
   - `frontend/templates/index.html` 与 `frontend/static/js/settings.js`：整理设置项排版与状态展示。
4. **验证回归**：覆盖无数据库、强制继续、正常连接三种路径，回归设置面板。

## 备注
- 修改需保持多语言兼容，避免破坏现有提示文本。
- 计划执行期间注意更新 TODO 状态并记录关键进展。
### 背景
用户反馈智能路由未生效、数据库拦截缺失且思考播报呈现混乱，需统一调整后端路由策略、守卫反馈与前端展示。

### 执行计划
1. 审查现有配置与入口，确认为何未触发智能路由。
2. 调整后端：默认启用路由或保障统一入口，增强数据库守卫返回信息，并规范步骤播报指令格式。
3. 前端优化数据库警示卡与思考流程UI，并整理设置面板布局。
4. 验证无数据库、强制执行及正常连接三种场景，确保体验一致。

