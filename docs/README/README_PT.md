<div align="center">
  
  <img src="../images/logo.png" width="400" alt="QueryGPT">
  
  <br/>
  
  <p>
    <a href="README.md">English</a> â€¢
    <a href="docs/README_CN.md">ç®€ä½“ä¸­æ–‡</a> â€¢
    <a href="#">PortuguÃªs</a>
  </p>
  
  <br/>
  
  [![License](https://img.shields.io/badge/LicenÃ§a-MIT-yellow.svg?style=for-the-badge)](LICENSE)
  [![Python](https://img.shields.io/badge/Python-3.10+-blue.svg?style=for-the-badge&logo=python&logoColor=white)](https://www.python.org/)
  [![OpenInterpreter](https://img.shields.io/badge/OpenInterpreter-0.4.3-green.svg?style=for-the-badge)](https://github.com/OpenInterpreter/open-interpreter)
  [![Stars](https://img.shields.io/github/stars/MKY508/QueryGPT?style=for-the-badge&color=yellow)](https://github.com/MKY508/QueryGPT/stargazers)
  
  <br/>
  
  <h3>Um Agente Inteligente de AnÃ¡lise de Dados baseado em OpenInterpreter</h3>
  <p><i>Converse com seu banco de dados em linguagem natural</i></p>
  
</div>

<br/>

---

## âœ¨ Principais Vantagens

**Pensa Como um Analista de Dados**
- **ExploraÃ§Ã£o AutÃ´noma**: Examina proativamente estruturas de tabelas e dados de amostra ao encontrar problemas
- **ValidaÃ§Ã£o Multi-rodadas**: Verifica novamente quando anomalias sÃ£o encontradas para garantir resultados precisos
- **AnÃ¡lise Complexa**: NÃ£o apenas SQL, pode executar Python para anÃ¡lise estatÃ­stica e aprendizado de mÃ¡quina
- **Pensamento VisÃ­vel**: ExibiÃ§Ã£o em tempo real do processo de raciocÃ­nio do Agente (Chain-of-Thought)

## ğŸ“¸ Capturas de Tela do Sistema

<img src="../images/agent-thinking-en.png" width="100%" alt="Interface QueryGPT"/>

**ExibiÃ§Ã£o em tempo real do processo de pensamento da IA, anÃ¡lise complexa de dados atravÃ©s de conversas em portuguÃªs.**

---

<img src="../images/data-visualization-en.png" width="100%" alt="VisualizaÃ§Ã£o de Dados"/>

**GeraÃ§Ã£o automÃ¡tica de grÃ¡ficos interativos, insights de dados em um relance.**

---

<img src="../images/developer-view-en.png" width="100%" alt="VisÃ£o do Desenvolvedor"/>

**ExecuÃ§Ã£o de cÃ³digo totalmente transparente, suportando SQL e Python como motores duplos.**

## ğŸŒŸ Recursos Principais

### Capacidades Centrais do Agente
- **ExploraÃ§Ã£o AutÃ´noma de Dados**: O Agente compreende proativamente a estrutura de dados e explora relacionamentos
- **RaciocÃ­nio Multi-rodadas**: Como um analista, investiga profundamente quando surgem problemas
- **Chain-of-Thought**: ExibiÃ§Ã£o em tempo real do processo de pensamento do Agente, intervenÃ§Ã£o possÃ­vel a qualquer momento
- **MemÃ³ria de Contexto**: Compreende o histÃ³rico de conversas, suporta anÃ¡lise contÃ­nua multi-rodadas

### Capacidades de AnÃ¡lise de Dados
- **SQL + Python**: NÃ£o limitado ao SQL, pode executar processamento complexo de dados em Python
- **AnÃ¡lise EstatÃ­stica**: AnÃ¡lise automÃ¡tica de correlaÃ§Ã£o, previsÃ£o de tendÃªncias, detecÃ§Ã£o de anomalias
- **Termos de NegÃ³cios**: CompreensÃ£o nativa de conceitos como YoY (ano a ano), MoM (mÃªs a mÃªs), retenÃ§Ã£o, recompra
- **VisualizaÃ§Ã£o Inteligente**: Seleciona automaticamente o melhor tipo de grÃ¡fico baseado nas caracterÃ­sticas dos dados

### Recursos do Sistema
- **Suporte Multi-modelo**: Alterne livremente entre GPT-4, Claude, Gemini, modelos locais Ollama
- **ImplementaÃ§Ã£o FlexÃ­vel**: Suporta API em nuvem ou implementaÃ§Ã£o local Ollama, dados nunca saem das instalaÃ§Ãµes
- **Registros de HistÃ³rico**: Salva processo de anÃ¡lise, suporta rastreamento e compartilhamento
- **SeguranÃ§a de Dados**: PermissÃµes somente leitura, proteÃ§Ã£o contra injeÃ§Ã£o SQL, mascaramento de dados sensÃ­veis
- **ExportaÃ§Ã£o FlexÃ­vel**: Suporta formatos Excel, PDF, HTML e outros

## ğŸ“¦ Requisitos TÃ©cnicos

- Python 3.10.x (obrigatÃ³rio, dependÃªncia do OpenInterpreter 0.4.3)
- MySQL ou banco de dados compatÃ­vel

> Windows: Execute no WSL (nÃ£o execute scripts no PowerShell/CMD).

## ğŸ“Š ComparaÃ§Ã£o de Produtos

| DimensÃ£o de ComparaÃ§Ã£o | **QueryGPT** | Vanna AI | DB-GPT | TableGPT | Text2SQL.AI |
|----------------------|:------------:|:--------:|:------:|:--------:|:-----------:|
| **Custo** | **âœ… Gratuito** | â­• VersÃ£o paga | âœ… Gratuito | âŒ Pago | âŒ Pago |
| **CÃ³digo Aberto** | **âœ…** | âœ… | âœ… | âŒ | âŒ |
| **ImplementaÃ§Ã£o Local** | **âœ…** | âœ… | âœ… | âŒ | âŒ |
| **Executa CÃ³digo Python** | **âœ… Ambiente completo** | âŒ | âŒ | âŒ | âŒ |
| **Capacidade de VisualizaÃ§Ã£o** | **âœ… ProgramÃ¡vel** | â­• GrÃ¡ficos predefinidos | âœ… GrÃ¡ficos ricos | âœ… GrÃ¡ficos ricos | â­• BÃ¡sico |
| **CompreensÃ£o de Termos de NegÃ³cios** | **âœ… Nativo** | â­• BÃ¡sico | âœ… Bom | âœ… Excelente | â­• BÃ¡sico |
| **ExploraÃ§Ã£o AutÃ´noma do Agente** | **âœ…** | âŒ | â­• BÃ¡sico | â­• BÃ¡sico | âŒ |
| **ExibiÃ§Ã£o de Pensamento em Tempo Real** | **âœ…** | âŒ | âŒ | âŒ | âŒ |
| **Capacidade de ExtensÃ£o** | **âœ… ExtensÃ£o ilimitada** | âŒ | âŒ | âŒ | âŒ |

### Nossas DiferenÃ§as Principais
- **Ambiente Python Completo**: NÃ£o sÃ£o recursos predefinidos, mas um ambiente de execuÃ§Ã£o Python real onde vocÃª pode escrever qualquer cÃ³digo
- **Extensibilidade Ilimitada**: Precisa de novos recursos? Basta instalar novas bibliotecas, sem esperar atualizaÃ§Ãµes do produto
- **ExploraÃ§Ã£o AutÃ´noma do Agente**: Investiga proativamente quando encontra problemas, nÃ£o Ã© apenas uma consulta Ãºnica simples
- **Processo de Pensamento Transparente**: Veja o que a IA estÃ¡ pensando em tempo real, pode intervir e orientar a qualquer momento
- **Verdadeiramente Gratuito e Open Source**: LicenÃ§a MIT, sem barreiras de pagamento

## ğŸš€ InÃ­cio RÃ¡pido

### Primeiro Uso

```bash
# 1. Clone o projeto
git clone https://github.com/MKY508/QueryGPT.git
cd QueryGPT

# 2. Execute o script de configuraÃ§Ã£o (configura automaticamente o ambiente)
./setup.sh

# 3. Inicie o serviÃ§o
./start.sh
```

### Uso Posterior

```bash
# InÃ­cio rÃ¡pido direto
./start.sh
```

O serviÃ§o serÃ¡ executado em http://localhost:5000 por padrÃ£o

> **Nota**: Se a porta 5000 estiver ocupada (por exemplo, AirPlay no macOS), o sistema selecionarÃ¡ automaticamente a prÃ³xima porta disponÃ­vel (5001-5010) e exibirÃ¡ a porta real usada na inicializaÃ§Ã£o.

> Windows: Execute no WSL (nÃ£o execute scripts pelo PowerShell/CMD).

## âš™ï¸ ConfiguraÃ§Ã£o

### ConfiguraÃ§Ã£o BÃ¡sica

1. **Copie o arquivo de configuraÃ§Ã£o de ambiente**
   ```bash
   cp .env.example .env
   ```

2. **Edite o arquivo .env para configurar o seguinte**
   - `OPENAI_API_KEY`: Sua chave de API OpenAI
   - `OPENAI_BASE_URL`: Endpoint da API (opcional, padrÃ£o para endpoint oficial)
   - InformaÃ§Ãµes de conexÃ£o do banco de dados

### ConfiguraÃ§Ã£o da Camada SemÃ¢ntica (Opcional)

A camada semÃ¢ntica melhora a compreensÃ£o de termos de negÃ³cios, ajudando o sistema a entender melhor sua linguagem de negÃ³cios. **Esta Ã© uma configuraÃ§Ã£o opcional, nÃ£o configurÃ¡-la nÃ£o afeta as funcionalidades bÃ¡sicas.**

1. **Copie o arquivo de exemplo**
   ```bash
   cp backend/semantic_layer.json.example backend/semantic_layer.json
   ```

2. **Modifique a configuraÃ§Ã£o com base em suas necessidades de negÃ³cios**
   
   A configuraÃ§Ã£o da camada semÃ¢ntica contÃ©m trÃªs partes:
   - **Mapeamento de Banco de Dados**: Define o significado comercial do banco de dados
   - **Tabelas de NegÃ³cios Principais**: Mapeia tabelas e campos de negÃ³cios importantes
   - **Ãndice de Busca RÃ¡pida**: Pesquisa rÃ¡pida de termos comuns

3. **Exemplo de ConfiguraÃ§Ã£o**
   ```json
   {
     "Tabelas de NegÃ³cios Principais": {
       "GestÃ£o de Pedidos": {
         "Caminho da Tabela": "database.orders",
         "Palavras-chave": ["pedido", "venda", "transaÃ§Ã£o"],
         "Campos ObrigatÃ³rios": {
           "order_id": "NÃºmero do Pedido",
           "amount": "Valor"
         }
       }
     }
   }
   ```

> **Nota**: 
> - O arquivo da camada semÃ¢ntica contÃ©m informaÃ§Ãµes comerciais sensÃ­veis e foi adicionado ao `.gitignore`, nÃ£o serÃ¡ enviado ao controle de versÃ£o
> - Quando a camada semÃ¢ntica nÃ£o estÃ¡ configurada, o sistema usa a configuraÃ§Ã£o padrÃ£o e ainda pode realizar consultas de dados normalmente
> - Para instruÃ§Ãµes detalhadas de configuraÃ§Ã£o, consulte [backend/SEMANTIC_LAYER_SETUP.md](backend/SEMANTIC_LAYER_SETUP.md)

## ğŸ“ Estrutura do Projeto

```
QueryGPT/
â”œâ”€â”€ backend/              # ServiÃ§o backend
â”‚   â”œâ”€â”€ app.py           # Entrada principal da aplicaÃ§Ã£o Flask
â”‚   â”œâ”€â”€ database.py      # Gerenciamento de conexÃ£o de banco de dados
â”‚   â”œâ”€â”€ interpreter_manager.py  # Interpretador de consultas
â”‚   â”œâ”€â”€ history_manager.py      # Gerenciamento de histÃ³rico
â”‚   â””â”€â”€ config_loader.py        # Carregador de configuraÃ§Ã£o
â”œâ”€â”€ frontend/            # Interface frontend
â”‚   â”œâ”€â”€ templates/       # Modelos HTML
â”‚   â””â”€â”€ static/          # Recursos estÃ¡ticos
â”‚       â”œâ”€â”€ css/         # Arquivos de estilo
â”‚       â””â”€â”€ js/          # JavaScript
â”œâ”€â”€ docs/                # DocumentaÃ§Ã£o do projeto
â”œâ”€â”€ logs/                # DiretÃ³rio de logs
â”œâ”€â”€ output/              # Arquivos de saÃ­da
â”œâ”€â”€ requirements.txt     # DependÃªncias Python
â””â”€â”€ .env.example         # Exemplo de configuraÃ§Ã£o
```

## ğŸ”Œ API

### Interface de Consulta

```http
POST /api/chat
Content-Type: application/json

{
  "message": "Consultar total de vendas deste mÃªs",
  "model": "default"
}
```

### HistÃ³rico

```http
GET /api/history/conversations    # Obter lista de histÃ³rico
GET /api/history/conversation/:id # Obter detalhes
DELETE /api/history/conversation/:id # Excluir registro
```

### VerificaÃ§Ã£o de SaÃºde

```http
GET /api/health
```

## ğŸ”’ InformaÃ§Ãµes de SeguranÃ§a

- Suporta apenas consultas somente leitura (SELECT, SHOW, DESCRIBE)
- Filtra automaticamente declaraÃ§Ãµes SQL perigosas
- UsuÃ¡rios do banco de dados devem ser configurados com permissÃµes somente leitura

## ğŸ“„ LicenÃ§a

MIT License - Veja o arquivo [LICENSE](LICENSE) para detalhes

## ğŸ†• AtualizaÃ§Ãµes Recentes

- 2025-09-05 â€“ OtimizaÃ§Ã£o de velocidade de inicializaÃ§Ã£o: Removido teste automÃ¡tico em lote ao entrar na pÃ¡gina de modelos pela primeira vez, reduzindo requisiÃ§Ãµes desnecessÃ¡rias e evitando escrita incorreta de estado.

## ğŸ‘¨â€ğŸ’» Autor

- **Autor**: Mao Kaiyue
- **GitHub**: [@MKY508](https://github.com/MKY508)
- **Data de CriaÃ§Ã£o**: Agosto de 2025

## â­ Star History

<div align="center">
  <a href="https://star-history.com/#MKY508/QueryGPT&Date">
    <picture>
      <source media="(prefers-color-scheme: dark)" srcset="https://api.star-history.com/svg?repos=MKY508/QueryGPT&type=Date&theme=dark" />
      <source media="(prefers-color-scheme: light)" srcset="https://api.star-history.com/svg?repos=MKY508/QueryGPT&type=Date" />
      <img alt="Star History Chart" src="https://api.star-history.com/svg?repos=MKY508/QueryGPT&type=Date" />
    </picture>
  </a>
</div>

## ğŸ¤ ContribuiÃ§Ã£o

Bem-vindo para enviar Issues e Pull Requests.

1. Fork este projeto
2. Crie uma branch de recurso (`git checkout -b feature/AmazingFeature`)
3. Commit suas alteraÃ§Ãµes (`git commit -m 'Add some AmazingFeature'`)
4. Push para a branch (`git push origin feature/AmazingFeature`)
5. Abra um Pull Request
