<div align="center">
  
  <img src="../images/logo.png" width="400" alt="QueryGPT">
  
  <br/>
  
  <p>
    <a href="README.md">English</a> â€¢
    <a href="docs/README_CN.md">ç®€ä½“ä¸­æ–‡</a> â€¢
    <a href="#">EspaÃ±ol</a>
  </p>
  
  <br/>
  
  [![License](https://img.shields.io/badge/Licencia-MIT-yellow.svg?style=for-the-badge)](LICENSE)
  [![Python](https://img.shields.io/badge/Python-3.10+-blue.svg?style=for-the-badge&logo=python&logoColor=white)](https://www.python.org/)
  [![OpenInterpreter](https://img.shields.io/badge/OpenInterpreter-0.4.3-green.svg?style=for-the-badge)](https://github.com/OpenInterpreter/open-interpreter)
  [![Stars](https://img.shields.io/badge/Stars-MKY508/QueryGPT-yellow.svg?style=for-the-badge&color=yellow)](https://github.com/MKY508/QueryGPT/stargazers)
  
  <br/>
  
  <h3>Un agente inteligente de anÃ¡lisis de datos basado en OpenInterpreter</h3>
  <p><i>Conversa con tu base de datos en lenguaje natural</i></p>
  
</div>

## âœ¨ Ventajas Principales

**Piensa como un Analista de Datos**
- **ExploraciÃ³n AutÃ³noma**: Examina proactivamente estructuras de tablas y datos de muestra al encontrar problemas
- **ValidaciÃ³n Multi-ronda**: Verifica nuevamente cuando se encuentran anomalÃ­as para garantizar resultados precisos
- **AnÃ¡lisis Complejo**: No solo SQL, puede ejecutar Python para anÃ¡lisis estadÃ­stico y aprendizaje automÃ¡tico
- **Pensamiento Visible**: VisualizaciÃ³n en tiempo real del proceso de razonamiento del Agente (Chain-of-Thought)

## ğŸ“¸ Capturas de Pantalla del Sistema

<img src="../images/agent-thinking-en.png" width="100%" alt="Interfaz QueryGPT"/>

**VisualizaciÃ³n en tiempo real del proceso de pensamiento de la IA, anÃ¡lisis complejo de datos a travÃ©s de conversaciones en espaÃ±ol.**

---

<img src="../images/data-visualization-en.png" width="100%" alt="VisualizaciÃ³n de Datos"/>

**GeneraciÃ³n automÃ¡tica de grÃ¡ficos interactivos, insights de datos de un vistazo.**

---

<img src="../images/developer-view-en.png" width="100%" alt="Vista de Desarrollador"/>

**EjecuciÃ³n de cÃ³digo completamente transparente, soporta SQL y Python como motores duales.**

## ğŸŒŸ Funcionalidades

### Capacidades Principales del Agente
- **ExploraciÃ³n AutÃ³noma de Datos**: El Agente comprende proactivamente la estructura de datos y explora relaciones
- **Razonamiento Multi-ronda**: Como un analista, investiga profundamente cuando surgen problemas
- **Chain-of-Thought**: VisualizaciÃ³n en tiempo real del proceso de pensamiento del Agente, intervenciÃ³n posible en cualquier momento
- **Memoria de Contexto**: Comprende el historial de conversaciones, soporta anÃ¡lisis continuo multi-ronda

### Capacidades de AnÃ¡lisis de Datos
- **SQL + Python**: No limitado a SQL, puede ejecutar procesamiento complejo de datos en Python
- **AnÃ¡lisis EstadÃ­stico**: AnÃ¡lisis automÃ¡tico de correlaciÃ³n, predicciÃ³n de tendencias, detecciÃ³n de anomalÃ­as
- **TÃ©rminos de Negocio**: ComprensiÃ³n nativa de conceptos como YoY, MoM, retenciÃ³n, recompra
- **VisualizaciÃ³n Inteligente**: Selecciona automÃ¡ticamente el mejor tipo de grÃ¡fico basado en las caracterÃ­sticas de los datos

### CaracterÃ­sticas del Sistema
- **Soporte Multi-modelo**: Cambia libremente entre GPT-5, Claude, Gemini, modelos locales Ollama
- **Despliegue Flexible**: Soporta API en la nube o despliegue local Ollama, los datos nunca salen de las instalaciones
- **Registros de Historial**: Guarda el proceso de anÃ¡lisis, soporta seguimiento y comparticiÃ³n
- **Seguridad de Datos**: Permisos de solo lectura, protecciÃ³n contra inyecciÃ³n SQL, enmascaramiento de datos sensibles
- **ExportaciÃ³n Flexible**: Soporta formatos Excel, PDF, HTML y otros

## ğŸ“¦ Requisitos TÃ©cnicos

- Python 3.10.x (requerido, dependencia de OpenInterpreter 0.4.3)
- MySQL o base de datos compatible

> Windows: Ejecuta en WSL (no ejecutes scripts en PowerShell/CMD).

## ğŸ“Š ComparaciÃ³n de Productos

| DimensiÃ³n de ComparaciÃ³n | **QueryGPT** | Vanna AI | DB-GPT | TableGPT | Text2SQL.AI |
|-------------------------|:------------:|:--------:|:------:|:--------:|:-----------:|
| **Costo** | **âœ… Gratuito** | â­• VersiÃ³n de pago | âœ… Gratuito | âŒ Pago | âŒ Pago |
| **CÃ³digo Abierto** | **âœ…** | âœ… | âœ… | âŒ | âŒ |
| **Despliegue Local** | **âœ…** | âœ… | âœ… | âŒ | âŒ |
| **Ejecuta CÃ³digo Python** | **âœ… Entorno completo** | âŒ | âŒ | âŒ | âŒ |
| **Capacidad de VisualizaciÃ³n** | **âœ… Programable** | â­• GrÃ¡ficos predefinidos | âœ… GrÃ¡ficos ricos | âœ… GrÃ¡ficos ricos | â­• BÃ¡sico |
| **ComprensiÃ³n de TÃ©rminos de Negocio** | **âœ… Nativo** | â­• BÃ¡sico | âœ… Bueno | âœ… Excelente | â­• BÃ¡sico |
| **ExploraciÃ³n AutÃ³noma del Agente** | **âœ…** | âŒ | â­• BÃ¡sico | â­• BÃ¡sico | âŒ |
| **VisualizaciÃ³n de Pensamiento en Tiempo Real** | **âœ…** | âŒ | âŒ | âŒ | âŒ |
| **Capacidad de ExtensiÃ³n** | **âœ… ExtensiÃ³n ilimitada** | âŒ | âŒ | âŒ | âŒ |

### Nuestras Diferencias Principales
- **Entorno Python Completo**: No son funciones predefinidas, sino un entorno de ejecuciÃ³n Python real donde puedes escribir cualquier cÃ³digo
- **Extensibilidad Ilimitada**: Â¿Necesitas nuevas funciones? Simplemente instala nuevas bibliotecas, no necesitas esperar actualizaciones del producto
- **ExploraciÃ³n AutÃ³noma del Agente**: Investiga proactivamente cuando encuentra problemas, no es solo una consulta Ãºnica simple
- **Proceso de Pensamiento Transparente**: Ve en tiempo real lo que la IA estÃ¡ pensando, puede intervenir y guiar en cualquier momento
- **Verdaderamente Gratuito y Open Source**: Licencia MIT, sin barreras de pago

## ğŸš€ Inicio RÃ¡pido

### Primer Uso

```bash
# 1. Clonar el proyecto
git clone https://github.com/MKY508/QueryGPT.git
cd QueryGPT

# 2. Ejecutar script de instalaciÃ³n (configura automÃ¡ticamente el entorno)
./setup.sh

# 3. Iniciar el servicio
./start.sh
```

### Uso Posterior

```bash
# Inicio rÃ¡pido directo (entorno ya instalado)
./start.sh
```

El servicio se ejecuta por defecto en http://localhost:5000

> **Nota**: Si el puerto 5000 estÃ¡ ocupado (por ejemplo, AirPlay en macOS), el sistema seleccionarÃ¡ automÃ¡ticamente el siguiente puerto disponible (5001-5010) y mostrarÃ¡ el puerto real utilizado al iniciar.

## âš™ï¸ Instrucciones de ConfiguraciÃ³n

### ConfiguraciÃ³n BÃ¡sica

1. **Copiar archivo de configuraciÃ³n de entorno**
   ```bash
   cp .env.example .env
   ```

2. **Editar el archivo .env para configurar lo siguiente**
   - `OPENAI_API_KEY`: Tu clave de API de OpenAI
   - `OPENAI_BASE_URL`: Endpoint de la API (opcional, por defecto usa el endpoint oficial)
   - InformaciÃ³n de conexiÃ³n a la base de datos

### ConfiguraciÃ³n de Capa SemÃ¡ntica (Opcional)

La capa semÃ¡ntica mejora la comprensiÃ³n de tÃ©rminos de negocio, ayudando al sistema a entender mejor tu lenguaje de negocio. **Esta es una configuraciÃ³n opcional, no configurarla no afecta las funcionalidades bÃ¡sicas.**

1. **Copiar archivo de ejemplo**
   ```bash
   cp backend/semantic_layer.json.example backend/semantic_layer.json
   ```

2. **Modificar la configuraciÃ³n segÃºn tus necesidades de negocio**
   
   La configuraciÃ³n de la capa semÃ¡ntica contiene tres partes:
   - **Mapeo de Base de Datos**: Define el significado comercial de la base de datos
   - **Tablas de Negocio Principales**: Mapea tablas y campos de negocio importantes
   - **Ãndice de BÃºsqueda RÃ¡pida**: BÃºsqueda rÃ¡pida de tÃ©rminos comunes

3. **Ejemplo de ConfiguraciÃ³n**
   ```json
   {
     "Tablas de Negocio Principales": {
       "GestiÃ³n de Pedidos": {
         "Ruta de Tabla": "database.orders",
         "Palabras Clave": ["pedido", "venta", "transacciÃ³n"],
         "Campos Requeridos": {
           "order_id": "NÃºmero de Pedido",
           "amount": "Monto"
         }
       }
     }
   }
   ```

> **Nota**: 
> - El archivo de capa semÃ¡ntica contiene informaciÃ³n comercial sensible y se ha agregado a `.gitignore`, no se enviarÃ¡ al control de versiones
> - Cuando la capa semÃ¡ntica no estÃ¡ configurada, el sistema usa la configuraciÃ³n predeterminada y aÃºn puede realizar consultas de datos normalmente
> - Para instrucciones detalladas de configuraciÃ³n, consulta [backend/SEMANTIC_LAYER_SETUP.md](backend/SEMANTIC_LAYER_SETUP.md)

## ğŸ“ Estructura del Proyecto

```
QueryGPT/
â”œâ”€â”€ backend/              # Servicio backend
â”‚   â”œâ”€â”€ app.py           # Entrada principal de la aplicaciÃ³n Flask
â”‚   â”œâ”€â”€ database.py      # GestiÃ³n de conexiÃ³n a base de datos
â”‚   â”œâ”€â”€ interpreter_manager.py  # IntÃ©rprete de consultas
â”‚   â”œâ”€â”€ history_manager.py      # GestiÃ³n de historial
â”‚   â””â”€â”€ config_loader.py        # Cargador de configuraciÃ³n
â”œâ”€â”€ frontend/            # Interfaz frontend
â”‚   â”œâ”€â”€ templates/       # Plantillas HTML
â”‚   â””â”€â”€ static/          # Recursos estÃ¡ticos
â”‚       â”œâ”€â”€ css/         # Archivos de estilo
â”‚       â””â”€â”€ js/          # JavaScript
â”œâ”€â”€ docs/                # DocumentaciÃ³n del proyecto
â”œâ”€â”€ logs/                # Directorio de logs
â”œâ”€â”€ output/              # Archivos de salida
â”œâ”€â”€ requirements.txt     # Dependencias Python
â””â”€â”€ .env.example         # Ejemplo de configuraciÃ³n
```

## ğŸ”Œ API

### Interfaz de Consulta

```http
POST /api/chat
Content-Type: application/json

{
  "message": "Consultar total de ventas de este mes",
  "model": "default"
}
```

### Historial

```http
GET /api/history/conversations    # Obtener lista de historial
GET /api/history/conversation/:id # Obtener detalles
DELETE /api/history/conversation/:id # Eliminar registro
```

### VerificaciÃ³n de Salud

```http
GET /api/health
```

## ğŸ”’ InformaciÃ³n de Seguridad

- Solo soporta consultas de solo lectura (SELECT, SHOW, DESCRIBE)
- Filtra automÃ¡ticamente declaraciones SQL peligrosas
- Los usuarios de la base de datos deben configurarse con permisos de solo lectura

## ğŸ“„ Licencia

MIT License - Ver archivo [LICENSE](LICENSE) para detalles

## ğŸ†• Actualizaciones Recientes

- 2025-09-05 â€“ OptimizaciÃ³n de velocidad de inicio: Eliminada prueba automÃ¡tica en lote al entrar por primera vez a la pÃ¡gina de modelos, reduciendo solicitudes innecesarias y evitando escritura incorrecta de estado.

## ğŸ‘¨â€ğŸ’» Autor

- **Autor**: Mao Kaiyue
- **GitHub**: [@MKY508](https://github.com/MKY508)
- **Fecha de CreaciÃ³n**: Agosto de 2025

## â­ Star History

<div align="center">
  <a href="https://star-history.com/#MKY508/QueryGPT&Date">
    <picture>
      <source media="(prefers-color-scheme: dark)" srcset="https://api.star-history.com/svg?repos=MKY508/QueryGPT&type=Date&theme=dark" />
      <source media="(prefers-color-scheme: light)" srcset="https://api.star-history.com/svg?repos=MKY508/QueryGPT&type=Date" />
      <img alt="Star History Chart" src="https://api.star-history.com/svg?repos=MKY508/QueryGPT&type=Date" />
    </picture>
  </a>
</div>

## ğŸ¤ ContribuciÃ³n

Bienvenido para enviar Issues y Pull Requests.

1. Fork este proyecto
2. Crea una rama de funcionalidad (`git checkout -b feature/AmazingFeature`)
3. Confirma tus cambios (`git commit -m 'Add some AmazingFeature'`)
4. Push a la rama (`git push origin feature/AmazingFeature`)
5. Abre un Pull Request
